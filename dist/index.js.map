{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\n\nfunction useSwipeScroll({\n  sliderRef,\n  reliants = [],\n  momentumVelocity = 0.9\n}) {\n  const [hasSwiped, setHasSwiped] = useState(false)\n\n  const init = useCallback(() => {\n    const slider = sliderRef.current;\n    let isDown = false;\n    let startX;\n    let scrollLeft;\n\n    slider.addEventListener('mousedown', (e) => {\n      isDown = true;\n      slider.classList.add('active');\n      startX = e.pageX - slider.offsetLeft;\n      scrollLeft = slider.scrollLeft;\n      cancelMomentumTracking();\n    });\n\n    slider.addEventListener('mouseleave', () => {\n      isDown = false;\n      slider.classList.remove('active');\n    });\n\n    slider.addEventListener('mouseup', () => {\n      isDown = false;\n      slider.classList.remove('active');\n      beginMomentumTracking();\n      setTimeout(() => setHasSwiped(false), 0)\n    });\n\n    slider.addEventListener('mousemove', (e) => {\n      if (!isDown) return;\n      e.preventDefault();\n      const x = e.pageX - slider.offsetLeft;\n      const walk = (x - startX) * 3; //scroll-fast\n      let prevScrollLeft = slider.scrollLeft;\n      slider.scrollLeft = scrollLeft - walk;\n      velX = slider.scrollLeft - prevScrollLeft;\n      if (slider.scrollLeft - prevScrollLeft && !hasSwiped) {\n        setHasSwiped(true)\n      }\n    });\n\n    // Momentum \n    let velX = 0;\n    let momentumID;\n\n    slider.addEventListener('wheel', (e) => {\n      cancelMomentumTracking();\n    });\n\n    function beginMomentumTracking() {\n      cancelMomentumTracking();\n      momentumID = requestAnimationFrame(momentumLoop);\n    }\n    function cancelMomentumTracking() {\n      cancelAnimationFrame(momentumID);\n    }\n    function momentumLoop() {\n      slider.scrollLeft += velX;\n      velX *= momentumVelocity;\n      if (Math.abs(velX) > 0.5) {\n        momentumID = requestAnimationFrame(momentumLoop);\n      }\n    }\n  })\n\n  useEffect(() => {\n    init();\n  }, [...reliants])\n\n  return {\n    hasSwiped,\n  }\n}\n\nexport default useSwipeScroll"],"names":["useSwipeScroll","sliderRef","reliants","momentumVelocity","useState","hasSwiped","setHasSwiped","init","useCallback","slider","current","isDown","startX","scrollLeft","addEventListener","e","classList","add","pageX","offsetLeft","cancelMomentumTracking","remove","beginMomentumTracking","setTimeout","preventDefault","x","walk","prevScrollLeft","velX","momentumID","requestAnimationFrame","momentumLoop","cancelAnimationFrame","Math","abs","useEffect"],"mappings":"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"}